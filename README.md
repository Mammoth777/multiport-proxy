# Multiport Proxy

ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§çš„å¤šç«¯å£ä»£ç†æœåŠ¡ï¼Œæ”¯æŒåŠ¨æ€é…ç½®å’Œå®æ—¶æ—¥å¿—æŸ¥çœ‹ã€‚

## Features

- ğŸš€ **Web é…ç½®ç•Œé¢** - å¯åŠ¨æ—¶è‡ªåŠ¨æ‰“å¼€ Web UIï¼Œè½»æ¾é…ç½®ä»£ç†è§„åˆ™
- ğŸ”€ **å¤šç«¯å£ä»£ç†** - æ”¯æŒé…ç½®å¤šä¸ªæœ¬åœ°ç«¯å£åˆ°ç›®æ ‡æœåŠ¡çš„æ˜ å°„
- âš™ï¸ **çµæ´»é…ç½®** - æ”¯æŒ CORSã€è¶…æ—¶ã€é‡è¯•ç­‰å¯é€‰é…ç½®
- ğŸ“Š **å®æ—¶æ—¥å¿—** - åœ¨ Web ç•Œé¢æŸ¥çœ‹å®æ—¶è¯·æ±‚/å“åº”æ—¥å¿—ï¼Œæ— éœ€æœ¬åœ°æŒä¹…åŒ–
- ğŸ’¾ **é…ç½®ä¿å­˜** - é…ç½®è‡ªåŠ¨ä¿å­˜ï¼Œé‡å¯åè‡ªåŠ¨åŠ è½½
- ğŸ¯ **é›¶é…ç½®å¯åŠ¨** - å¼€ç®±å³ç”¨ï¼Œæ— éœ€å¤æ‚é…ç½®

## é¡¹ç›®æ¶æ„

```
multiport-proxy/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ server/
â”‚   â”‚   â”œâ”€â”€ proxy-server.ts          # ä»£ç†æœåŠ¡æ ¸å¿ƒé€»è¾‘
â”‚   â”‚   â”œâ”€â”€ config-manager.ts        # é…ç½®ç®¡ç†æ¨¡å—
â”‚   â”‚   â””â”€â”€ logger.ts                # æ—¥å¿—ç®¡ç†æ¨¡å—
â”‚   â”œâ”€â”€ web/
â”‚   â”‚   â”œâ”€â”€ api-routes.ts            # Web API è·¯ç”±ï¼ˆé…ç½®/æ—¥å¿—ï¼‰
â”‚   â”‚   â”œâ”€â”€ ui/
â”‚   â”‚   â”‚   â”œâ”€â”€ index.html           # Web é…ç½®ç•Œé¢
â”‚   â”‚   â”‚   â”œâ”€â”€ style.css            # æ ·å¼è¡¨
â”‚   â”‚   â”‚   â””â”€â”€ app.js               # å‰ç«¯é€»è¾‘
â”‚   â”‚   â””â”€â”€ middleware.ts            # Web ä¸­é—´ä»¶
â”‚   â””â”€â”€ index.ts                     # åº”ç”¨å…¥å£
â”œâ”€â”€ data/
â”‚   â””â”€â”€ config.json                  # é…ç½®æŒä¹…åŒ–æ–‡ä»¶
â”œâ”€â”€ package.json
â””â”€â”€ tsconfig.json
```

## æ ¸å¿ƒæµç¨‹

1. **å¯åŠ¨**ï¼šåº”ç”¨å¯åŠ¨æ—¶åŠ è½½é…ç½®ï¼Œåˆå§‹åŒ–ä»£ç†æœåŠ¡å™¨å’Œ Web æœåŠ¡å™¨
2. **Web UI**ï¼šè‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨è®¿é—®é…ç½®é¡µé¢ (localhost:8888)
3. **é…ç½®**ï¼šç”¨æˆ·é€šè¿‡ Web UI æ·»åŠ /ç¼–è¾‘/åˆ é™¤ä»£ç†è§„åˆ™
4. **ä»£ç†**ï¼šæ ¹æ®é…ç½®å°†è¯·æ±‚è½¬å‘åˆ°ç›®æ ‡æœåŠ¡
5. **æ—¥å¿—**ï¼šå®æ—¶åœ¨ Web UI æ˜¾ç¤ºè¯·æ±‚æ—¥å¿—ï¼Œæ”¯æŒæ»šåŠ¨æŸ¥çœ‹

## ä½¿ç”¨æµç¨‹

### å¯åŠ¨é¡¹ç›®
```bash
pnpm run dev
```

### æ‰“å¼€é…ç½®é¡µé¢
è‡ªåŠ¨æ‰“å¼€ http://localhost:8888

### é…ç½®ä»£ç†è§„åˆ™
1. è¾“å…¥æœ¬åœ°ç›‘å¬ç«¯å£
2. è¾“å…¥ç›®æ ‡æœåŠ¡åœ°å€ï¼ˆå¦‚ http://localhost:3000ï¼‰
3. å¯é€‰é…ç½® CORSã€è¶…æ—¶ç­‰
4. ç‚¹å‡»"ä¿å­˜"

### æŸ¥çœ‹æ—¥å¿—
- å®æ—¶æ˜¾ç¤ºæ‰€æœ‰ä»£ç†è¯·æ±‚
- æ”¯æŒæ»šåŠ¨æŸ¥çœ‹å†å²æ—¥å¿—
- æŒ‰ç«¯å£/çŠ¶æ€ç ç­›é€‰

## API æ¥å£

### è·å–é…ç½®
- `GET /api/config` - è·å–æ‰€æœ‰ä»£ç†è§„åˆ™

### ä¿å­˜é…ç½®
- `POST /api/config` - ä¿å­˜ä»£ç†è§„åˆ™

### è·å–æ—¥å¿—
- `GET /api/logs` - è·å–å®æ—¶æ—¥å¿—ï¼ˆæ”¯æŒåˆ†é¡µ/ç­›é€‰ï¼‰

### æ¸…ç©ºæ—¥å¿—
- `DELETE /api/logs` - æ¸…ç©ºæ‰€æœ‰æ—¥å¿—

## é…ç½®æ–‡ä»¶æ ¼å¼

```json
{
  "rules": [
    {
      "id": "rule-1",
      "localPort": 3000,
      "targetUrl": "http://api.example.com",
      "cors": {
        "enabled": true,
        "origins": ["*"]
      },
      "timeout": 30000,
      "retries": 0,
      "enabled": true
    }
  ]
}
```

## å¼€å‘è¦æ±‚

- Node.js >= 16
- TypeScript
- Express.js (Web æœåŠ¡å™¨)
- http-proxy (ä»£ç†åº“)
- React/Vue/Vanilla JS (å‰ç«¯)

## è®¸å¯è¯

ISC
